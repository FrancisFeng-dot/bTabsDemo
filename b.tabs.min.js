"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var a={loginUrl:"/",className:void 0,resize:void 0},e={closeBtnTemplate:'<button type="button" class="navTabsCloseBtn" title="关闭" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">×</span></button>',noCloseClass:"noclose",prefixKey:"bTabs_"},n=function(t,a){this.$container=t,this.openTabs=new Array,this.p=a};n.version="1.0",n.prototype.init=function(){var a=this,n=e,i=this.$container,s=this.openTabs,o=this.p;t(i).addClass("bTabs"),o.className&&t(i).addClass(o.className),t("ul.nav-tabs a",t(i)).each(function(a,e){var i=t(this).closest("li");i&&!t(i).hasClass(n.noCloseClass)&&t(e).append(n.closeBtnTemplate)}),t("div.tab-content div.tab-pane",i).each(function(a,e){s.push(t(this).attr("id"))}),t("ul.nav-tabs",i).on("click","button",function(e){var n=t(this).parent().attr("href").replace("#","");a.closeTab(n)}),o&&o.resize&&t.isFunction(o.resize)&&t(window).off("resize.bTabs").on("resize.bTabs",function(t){o.resize()})},n.prototype.addTab=function(a,n,i,s){a&&n&&i||console.error("新增tab时，id,title,url参数为必须传递参数！");var o=e,r=this.$container,l=this.openTabs,b=this.p,c=o.prefixKey+a;if(l&&t.isArray(l)&&l.length>0){var f=!1;if(t.each(l,function(t,a){if(a==c)return f=!0,!1}),f)return void t('ul.nav-tabs a[href="#'+c+'"]',r).tab("show")}else l=new Array;t("ul.nav-tabs",r).append('<li><a href="#'+c+'" data-toggle="tab">'+n+o.closeBtnTemplate+"</a></li>");var u=t('<div class="tab-pane" id="'+c+'"></div>');t("div.tab-content",r).append(u),t("ul.nav-tabs li:last a",r).tab("show"),l.push(c);var p=function(){t(u).append('<iframe frameborder="0" scrolling="yes" style="width:100%;height:100%;border:0px;" src="'+i+'"></iframe>')};s&&t.isFunction(s)?s()?p():b&&b.loginUrl&&window.top.location.replace(b.loginUrl):p()},n.prototype.closeTab=function(a){var e=this.$container,n=this.openTabs,i=t("#"+a);t("iframe",t(i)).length>0&&t("iframe",t(i)).remove(),t(i).remove();var s=t('ul.nav-tabs a[href="#'+a+'"]',e),o=t(s).closest("li"),r=t(o).prev();if(o.remove(),n&&t.isArray(n)&&n.length>0){var l=-1;t.each(n,function(t,e){if(e==a)return l=t,!1}),-1!=l&&n.splice(l,1)}r.length>0&&t("a",t(r)).tab("show")};var i=t.fn.bTabs;t.fn.bTabs=function(e){return this.each(function(){var i=t(this),s=i.data("bTabs"),o=t.extend({},a,i.data(),"object"==(void 0===e?"undefined":_typeof(e))&&e);s||i.data("bTabs",s=new n(this,o)),s.init()})},t.fn.bTabs.Constructor=n,t.fn.bTabsAdd=function(a,e,n,i){return this.each(function(){if(a&&e&&n){var s=t(this).data("bTabs");s&&s.addTab(a,e,n,i)}})},t.fn.bTabsClose=function(a){return this.each(function(){if(a&&title&&url){var e=t(this).data("bTabs");e&&e.closeTab(a)}})},t.fn.bTabs.noConflict=function(){return t.fn.bTabs=i,this}}(window.jQuery);